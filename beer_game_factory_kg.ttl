# ============================================================
# BEER GAME - FACTORY KNOWLEDGE GRAPH (TEMPORAL VERSION)
# Federated endpoint: http://localhost:7200/repositories/BeerGame_Factory
# ============================================================

@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix bg: <http://beergame.org/ontology#> .
@prefix bg_distributor: <http://beergame.org/distributor#> .
@prefix bg_factory: <http://beergame.org/factory#> .

# ============================================================
# TIME DIMENSION
# ============================================================

bg:Week_1 a bg:Week ;
    bg:weekNumber "1"^^xsd:integer ;
    rdfs:label "Week 1" .

# ============================================================
# FACTORY ACTOR (STATIC IDENTITY)
# ============================================================

bg_factory:Factory_Delta a bg:Factory ;
    rdfs:label "Factory Delta" ;
    bg:agentModel "GPT-5"^^xsd:string ;
    bg:agentPrompt """You are the Factory in a beer distribution game.
You are the furthest upstreamâ€”you produce beer based on distributor orders.
Your production decisions affect the entire supply chain.
Query federated KGs to see TOTAL supply chain demand, not just your immediate orders.
Smooth production to avoid bullwhip amplification."""^^xsd:string ;
    bg:shippingDelay "2"^^xsd:integer ;
    bg:orderDelay "1"^^xsd:integer ;
    bg:suppliesTo bg_distributor:Distributor_Gamma ;
    bg:budgetConstraint "50000.00"^^xsd:decimal ;
    bg:totalCost "0.00"^^xsd:decimal .

# ============================================================
# PRODUCTION CAPACITY
# ============================================================

bg_factory:ProductionCapacity a bg:ProductionLine ;
    bg:maxProductionRate "100"^^xsd:integer ;
    bg:currentProductionRate "4"^^xsd:integer ;
    rdfs:label "Beer Production Line" .

# ============================================================
# INVENTORY STATE (WEEK 1)
# ============================================================

bg_factory:Inventory_Week1 a bg:Inventory ;
    bg:forWeek bg:Week_1 ;
    bg:belongsTo bg_factory:Factory_Delta ;
    bg:currentInventory "12"^^xsd:integer ;
    bg:backlog "0"^^xsd:integer ;
    bg:incomingShipment "0"^^xsd:integer ;
    bg:outgoingShipment "0"^^xsd:integer ;
    bg:holdingCost "0.50"^^xsd:decimal ;
    bg:backlogCost "1.00"^^xsd:decimal .

# ============================================================
# INCOMING ORDER FROM DISTRIBUTOR (WEEK 1)
# ============================================================

bg_factory:ReceivedOrder_Week1 a bg:Order ;
    bg:forWeek bg:Week_1 ;
    bg:belongsTo bg_factory:Factory_Delta ;
    bg:placedBy bg_distributor:Distributor_Gamma ;
    bg:receivedBy bg_factory:Factory_Delta ;
    bg:orderQuantity "4"^^xsd:integer .

# ============================================================
# PRODUCTION DECISION (WEEK 1)
# ============================================================

bg_factory:ProductionOrder_Week1 a bg:ProductionOrder ;
    bg:forWeek bg:Week_1 ;
    bg:belongsTo bg_factory:Factory_Delta ;
    bg:producedQuantity "4"^^xsd:integer ;
    bg:completionWeek "2"^^xsd:integer ;
    rdfs:comment "Produce to match current demand" .

# ============================================================
# SHIPMENT TO DISTRIBUTOR
# ============================================================

bg_factory:Shipment_Week1_ToDistributor a bg:Shipment ;
    bg:forWeek bg:Week_1 ;
    bg:belongsTo bg_factory:Factory_Delta ; 
    bg:shippedFrom bg_factory:Factory_Delta ;
    bg:shippedTo bg_distributor:Distributor_Gamma ;
    bg:shippedQuantity "4"^^xsd:integer ;
    bg:arrivalWeek "3"^^xsd:integer .

# ============================================================
# ACTOR METRICS (WEEK 1 SNAPSHOT)
# ============================================================

bg_factory:Metrics_Week1 a bg:ActorMetrics ;
    bg:forWeek bg:Week_1 ;
    bg:belongsTo bg_factory:Factory_Delta ;
    bg:demandRate "4.0"^^xsd:decimal ;
    bg:inventoryCoverage "3.0"^^xsd:decimal ;
    bg:hasBullwhipRisk "false"^^xsd:boolean ;
    bg:hasStockoutRisk "false"^^xsd:boolean .

bg_factory:Factory_Delta
    bg:hasMetrics bg_factory:Metrics_Week1 .

# ============================================================
# RAW MATERIALS (FACTORY-SPECIFIC)
# ============================================================

bg_factory:RawMaterials_Week1 a bg:RawMaterials ;
    bg:forWeek bg:Week_1 ;
    bg:belongsTo bg_factory:Factory_Delta ;
    bg:hopsInventory "500"^^xsd:integer ;
    bg:maltInventory "800"^^xsd:integer ;
    bg:yeastInventory "200"^^xsd:integer ;
    rdfs:comment "Sufficient materials for 100+ weeks" .
